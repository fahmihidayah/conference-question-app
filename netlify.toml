[build]
  command = "npm run build"
  publish = ".next"

[build.environment]
  NODE_VERSION = "18"
  # Skip env validation during build
  CI = "true"
  # Provide fallback values for build
  DATABASE_URL = "postgresql://localhost:5432/question-app"
  APP_URL = "https://your-site.netlify.app"

[context.production.environment]
  # Update these in your Netlify dashboard
  DATABASE_URL = "$DATABASE_URL"
  APP_URL = "$DEPLOY_URL"
  NEXTAUTH_URL = "$DEPLOY_URL"
  NEXTAUTH_SECRET = "$NEXTAUTH_SECRET"
  GITHUB_ID = "$GITHUB_ID"
  GITHUB_SECRET = "$GITHUB_SECRET"
  NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY = "$NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY"
  GOOGLE_SITE_VERIFICATION_ID = "$GOOGLE_SITE_VERIFICATION_ID"

[[redirects]]
  from = "/*"
  to = "/index.html"
  status = 200